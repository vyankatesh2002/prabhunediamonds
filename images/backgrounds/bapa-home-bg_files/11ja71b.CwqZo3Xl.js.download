import"./bygoogle.BryaCgoc.js";import{r as _,E as b,q as $,x as v,k as D,a as E,s as z}from"./index.UUHjpunW.js";import{o as A}from"./share-url.CUafJOjJ.js";import{p as L,h as u}from"./hue.BK3Uy5n9.js";import{a2 as I}from"./reactivity.esm-bundler.DC6MN4HZ.js";import"./prf-down.DSDRdQwg.js";import"./video.DMyvRmn_.js";import"./client.4EdykBzT.js";import"./nav.Dyt_Y-JK.js";import"./11ja71b.BWmGR8Wj.js";import"./11ja71b.-XtgNIFA.js";import"./searchbar.DqvY8Psx.js";import"./howto.oH912zMg.js";import"./client.L2R_SZMp.js";import"./client.CD5I_kE9.js";import"./scroll.DXYWw_5Q.js";import"./usePosition.DgCG-NhO.js";import"./index.Bw9H9MWl.js";import"./core.BlN5bdqz.js";function k(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*i(){}k.g=i}function R(i,n){if(!i)return;const t=document.getElementById(n)||document.createElement("iframe");t.id=n,t.src=i,document.body.appendChild(t)}function q(){if(!__DATA__.isBot){const{id:i,type:n}=s;_.get("/api/statistics/view",{id:i,type:n}),n=="1"?_.get("/api/statistics/detail-out-view",{id:i}):n=="5"&&L("font_detail",1,"come")}}const s=window._getDetailData(),x=I({spin:!1}),g=()=>{x.spin=!1},y=i=>{g(),i&&window.open(i,"_blank")},B=()=>{$("rbg_id_type","".concat(s.id,"_").concat(s.type),{domain:".pngtree.com",expires:1}),y("/remove-background")},W={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function j(i,n,t){if(!i||x.spin)return;const e=s.one>0||s.limitedTime,o=()=>{if(__DATA__.enterpriseStatus==1)return;const r=+s.vipType;if(r==1&&__DATA__.trial)return b.emit("_amemn8","limitedTime",{onend:g,type:s.type,trial_price:!0}),!0;if(!e&&r>0){const p=__DATA__.vipType<=0;if(p||!p&&r==2)return g(),$app.dialog="upgrade-premium",!0}};if(!$app.checkIsLogin()){u("down-btnnologin-"+i);return}if(i==="remove-bg"){o()||(u("detail/ai-btn-remove-bg"),B());return}switch(x.spin=!0,u(W[i]),i){case"png":case"rar":case"ppt":case"twibbon":const r=i==="png";n&&e?y(n):b.emit("_amemn8","*",{onend:g,type:s.type,btnType:i,licenseType:s.vipType||0,href:n,downUrl:n,rarName:t||"PSD",fee:s.fee&&r});break;case"edit":n&&s.editips&&confirm(s.editips)?(n=n.replace(/\/canvas\/?\?/,"/canvas/designer.html?"),y(n)):o()||y(n);break;case"freevideo":R(n,"down_ifr"),g();break;default:i==="premium"&&__DATA__.cookieLang!=="cht"?b.emit("_amemn8","plans",{onend:g,type:s.type}):y(n);break}}function F(i,n,t){if(!$app.checkIsLogin()){u("downsizes-nologin-"+i);return}if(!n)return;if(document.querySelector("._1rtuhfs")){$app.dialog="device-limit";return}const e=a=>{b.emit("_amemn8",a,{fee:a==="rar"?!0:void 0,onend:g,type:s.type}),u("downsizes-limit-"+i)},{vipType:o,down_count:r,enterpriseStatus:p,has_down:c}=__DATA__,{vipType:l}=s,h=r<=0,f=o==0;if(l==2&&p!=1){e("enterprise");return}if(f){e("plans");return}if([1,6,9].includes(+o)&&h){e("daily");return}if(c>200){e("max");return}t(!0);const d=a=>{t(!1),a&&setTimeout(()=>{location.href=n+"&task_id="+a},100)};_.post("/api/ai-tools/img-enlarge",{id:s.id,multiple:i}).then(a=>{if(a.status==201)d(a.data.task_id);else if(a.status==200){const{task_id:S,md5:T}=a.data;w(S,T,0)}else $toast==null||$toast.error(a.info||"Error!"),t(!1)}).catch(()=>{t(!1),$toast==null||$toast.error("Error!")});function w(a,S,T){!a||T>=50||_.post("/api/ai-tools/img-enlarge-task",{id:s.id,task_id:a,md5:S,multiple:i}).then(C=>{if(C.status==400){$toast==null||$toast.error(C.info),t(!1);return}C.status==200?d(C.data.task_id||a):setTimeout(()=>{w(a,S,++T)},5e3)}).catch(()=>{})}}v("_19z0z4b",()=>{const i={type:"",desc:""};return{loading:!1,err:"",form:{...i},errCls(n){return this.err===n?"_feqbc0":""},onSubmit(){if(this.loading)return;const n={...this.form},t=e=>{if(n[e].trim()==="")return this.err=e,!0};t("type")||t("desc")||(this.err="",this.loading=!0,_.post("/api/message/complaint",{complaint_type:n.type,content:n.desc,element_id:s.id,element_type:s.type}).then(e=>{this.loading=!1,e.rsp==200?($toast==null||$toast.success("Successful!"),this.$nextTick(()=>{$app.onDialog(""),setTimeout(()=>{this.form={...i}},300)})):$toast==null||$toast.error(e.info)}).catch(()=>{this.loading=!1,$toast==null||$toast.error("Error!")}))}}});v("_1r0qupz",i=>({tab:i.tab,prfLoading:!1,tabCls(n){return this.tab===n?"_c5516n":""},onTab(n){this.tab=n},licPrf(n){const t=this.$app;if(!t.tapLogin())return;const e=n==="enterprise",o=e?"team":"",r=s.one>0,{vipType:p,enterpriseStatus:c}=__DATA__,l=e?c!=1:p<=0;if(!r&&l)t.onDialog(e?"_5j84hy":"_1mbqn4s"),u("prfview-btn"+o);else if(!this.prfLoading){this.prfLoading=!0;const h=this._Refs.prfDown,f=()=>{this.prfLoading=!1};h.onshow({...h.getName(s.one,n),slidesdocs:!!s.slidesdocs,data:{action:"detail",id:s.id,type:s.type},resolve:f,reject:f}),u("prfdown-btn"+o)}}}));v("_1um5rr9",i=>({url:i.url,followed:i.is,loading:!1,onFollow(){const n=this.$app;!this.loading&&n.tapLogin()&&(this.loading=!0,_.post("/api/async/designer-follow",{id:i.uid}).then(t=>{this.loading=!1,t.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));v("_166ljwa",i=>{const n="_sstrbf";return{store:x,previewSpin:!1,videoSize:"",wordsExpand:i.is2xl,wordsCount:"+10",wordsFromCls:i.is2xl?"":n,showDownSizes:!1,downSizeSpins:{},get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(s.id,s.type),this.wordsCalc(!0),q()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=n,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,e=t&&t.parentElement;if(!e)return;e.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const e=this.$refs.wordsbtn,o=e&&e.parentElement;if(!o)return;const r=()=>{e.classList.remove("_1i3kt2s")};if(t&&i.is2xl){r();return}const p=o.children,c=p.length,l=p[c-1];if(c<=1||l&&l.offsetTop<=0)return;const h=(f,d)=>{if(this.wordsCount="+"+(c-1-d),o.insertBefore(e,f),e.offsetTop>0){const w="previousElementSibling";let a=e[w];for(;a&&a.offsetTop>0;)a=a[w];a&&h(a,d-1)}else o._btn=f,o._btni=d;r()};if(o._btn){h(o._btn,o._btni);return}for(let f=0;f<c;f++){const d=p[f];if(d.offsetTop>0){h(d,f);break}}},onDownld(t,e,o){j(t,e,o)},onDownSizes(t){this.showDownSizes=t!=null?t:!this.showDownSizes},sizesDownld(t){if(this.downSizeSpins[t])return;const e=this.$refs.downld_png._xprops.u;F(t,e,o=>{this.downSizeSpins[t]=o})},mDownld(){const t=this.$refs.image;s.type=="15"&&t?fetch(t.currentSrc||t.src,{mode:"cors"}).then(e=>e.blob()).then(e=>{const o=URL.createObjectURL(e),r=document.createElement("a");r.className="_zzqtmz _bdjirm",r.href=o,r.download="",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(o)},100)}).catch(()=>{$toast==null||$toast.error("Download Error!")}):z(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(t=!1){if(t){const l=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(l){E.dispatch(l,"click");return}}if(this.previewSpin)return;const e=this.$refs.imgLink,o=this.$refs.image;if(!e||!o)return;const r=e.href||o.currentSrc||o.src;if(!r)return;const p=()=>{$app.onPreviewImg({watermark:s.watermark,src:r,width:e._nw,height:e._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{u("detail-preview-image")},80),e._nw){p();return}const c=new Image;c.onload=()=>{e._nw=c.naturalWidth,e._nh=c.naturalHeight,p()},c.onabort=c.onerror=()=>{this.previewSpin=!1,$toast==null||$toast.error("Load failed!")},c.decoding="async",c.src=r},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:s.id,type:s.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:s.id,type:s.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(s.id,s.type)},urlCopying:!1,onShareUrl(){D(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const e=this.$refs.image,o=e?e.currentSrc||e.src:P(s.shareimg);A({name:t,media:o,title:s.sharetit,word:s.shareword})},how2Attri(){const t=this._Refs.howToAttribute,e=this.$refs.lionName;t.onopen({type:s.type,url:location.pathname,usrName:e&&e.textContent||""})}}});function P(i){return/^https?:\/\//.test(i)?i:"https://png.pngtree.com"+i}const H=i=>i*(96/72);v("_e05maq",i=>({text:"",pt:i.pt,effectId:i.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(H(this.pt),"px")},get fontText(){return this.text||i.p},ptCls(n){return this.pt===n?"_4x0icu":"_1t7gxnv"},ptClick(n){this.pt=n},effectCls(n){return this.effectId===n?"_1abob5y":"_oqy7bn"},effectClick(n){this.effectId=n},"on:mounted"(){O(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const t=this.fontText.trim();if(!t)return;this.loading=!0;const e=()=>{this.loading=!1},o=this.$refs.spanTxt,r=o&&o.parentElement;if(!r)return;const p=this.$refs.canvas,c=getComputedStyle(o);b.emit("_h3jjzr",{styles:{left:o.offsetLeft,top:o.offsetTop+1.25,fontFamily:c.fontFamily,fontSize:parseInt(c.fontSize),fontWeight:c.fontWeight,fontStyle:c.fontStyle},effectId:this.effectId,text:t,textWidth:o.offsetWidth,canvasWidth:r.offsetWidth,canvasHeight:r.offsetHeight,cid:p.id,onok:e,onerr(){e(),$toast==null||$toast.error("Error!")}})}}}));function O(){const i=document.querySelector("style[data-font-style]");if(i&&i.sheet){const n=i.sheet.cssRules,t=n.length;for(let e=0;e<t;e++)M(n[e].cssText);i.parentElement.removeChild(i)}}let m;function M(i){m||(m=document.createElement("style"),document.head.appendChild(m),m.appendChild(document.createTextNode(""))),m.sheet&&m.sheet.insertRule(i,m.sheet.cssRules.length)}export{k as __vite_legacy_guard};
